var scanditsdk=require("com.mirasense.scanditsdk"),picker,window,closeScanner=function(){null!=picker&&picker.stopScanning(),window.close()};exports.closeScanner=function(){closeScanner()},exports.createScannerWindow=function(){return Titanium.UI.createWindow({navBarHidden:!0,fullscreen:!0})},exports.createScannerButton=function(){return Titanium.UI.createButton({width:200,height:80,image:"/images/scan.png"})},exports.openScanner=function(e){picker=scanditsdk.createView({width:"100%",height:"100%"}),picker.init("qt/U+huGEeSG62SYxtngPa7xVDA0BLRMw7gQLH8qAB0",0),picker.showSearchBar(!1),picker.showToolBar(!0),picker.setSuccessCallback(function(t){if("1"==e){var i=t.barcode,o=i.split("||");Ti.App.fireEvent("qr_code:update_compelete_code",{res:o})}closeScanner()}),picker.setCancelCallback(function(){closeScanner()}),window.add(picker),window.addEventListener("open",function(){"iphone"==Ti.Platform.osname||"ipad"==Ti.Platform.osname||picker.setOrientation(window.orientation),picker.setSize(Ti.Platform.displayCaps.platformWidth,Ti.Platform.displayCaps.platformHeight),picker.startScanning()}),window.addEventListener("android:back",function(){closeScanner()}),window.open()},exports.init=function(e){window=e},("iphone"==Ti.Platform.osname||"ipad"==Ti.Platform.osname)&&(Titanium.UI.iPhone.statusBarHidden=!0),Ti.Gesture.addEventListener("orientationchange",function(e){window.orientationModes=[Titanium.UI.PORTRAIT,Titanium.UI.UPSIDE_PORTRAIT,Titanium.UI.LANDSCAPE_LEFT,Titanium.UI.LANDSCAPE_RIGHT],null!=picker&&(picker.setOrientation(e.orientation),picker.setSize(Ti.Platform.displayCaps.platformWidth,Ti.Platform.displayCaps.platformHeight))});