function __processArg(e,t){var i=null;return e&&(i=e[t]||null,delete e[t]),i}function Controller(){function e(e){var t=JSON.parse(e);if("error"==t.status)return l.finish(),Common.createAlert("Error",t.data),!1;var i=Alloy.createCollection("user"),r=t.data;i.saveArray(r),l.finish(),Common.createAlert("Notification","Pando account registration successful"),Alloy.Globals.navWin.closeWindow(n.signUpWin)}function t(){var t=n.fullname.value,i=n.mobile.value,r=n.email.value,o=n.username.value,a=n.password.value,d=n.confirm.value;if(""==t)return Common.createAlert("Fail","Please fill in your full name"),!1;if(""==i)return Common.createAlert("Fail","Please fill in your contact number"),!1;if(""==r)return Common.createAlert("Fail","Please fill in your email address"),!1;if(""==o)return Common.createAlert("Fail","Please fill in your username"),!1;if(""==a||""==d)return Common.createAlert("Fail","Please fill in your password"),!1;if(a!=d)return Common.createAlert("Fail","Both password must be same"),!1;if(a.length<6)return Common.createAlert("Fail","Password must at least 6 alphanumberic"),!1;var c={Filedata:n.item_image.toImage(),fullname:t,mobile:i,email:r,username:o,password:a,photoLoad:s};l.start(),API.callByPostImage({url:"doSignUpUrl",params:c},e)}function i(){var e=d.getMedia();n.item_image.image=e,s=1}function r(){var e=Titanium.UI.createOptionDialog({title:"Choose an image source...",options:["Camera","Photo Gallery","Cancel"],cancel:2});e.addEventListener("click",function(e){0==e.index?Titanium.Media.showCamera({success:function(e){d=Alloy.createController("image_preview",{media:e.media});var t=d.getView();Alloy.Globals.navWin.openWindow(t,{animated:!0})},cancel:function(){},error:function(e){var t=Titanium.UI.createAlertDialog({title:"Camera"});t.setMessage(e.code==Titanium.Media.NO_CAMERA?"Device does not have camera":"Unexpected error: "+e.code),t.show()},allowImageEditing:!0,mediaTypes:[Ti.Media.MEDIA_TYPE_PHOTO],saveToPhotoGallery:!0}):1==e.index&&Titanium.Media.openPhotoGallery({success:function(e){d=Alloy.createController("image_preview",{media:e.media});var t=d.getView();Alloy.Globals.navWin.openWindow(t,{animated:!0})},cancel:function(){},mediaTypes:[Ti.Media.MEDIA_TYPE_PHOTO]})}),e.show()}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="auth/signup",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var n=this,o={},a={};n.__views.signUpWin=Ti.UI.createWindow({backgroundColor:"#E4E6E1",titleAttributes:{color:"#eaebe6"},navBarHidden:"false",font:{fontFamily:"Lato-Regular"},title:"Register",id:"signUpWin"}),n.__views.signUpWin&&n.addTopLevelView(n.__views.signUpWin),n.__views.__alloyId130=Ti.UI.createScrollView({layout:"vertical",width:Ti.UI.FILL,height:Ti.UI.FILL,backgroundImage:"/images/home_background.jpg",scrollType:"vertical",id:"__alloyId130"}),n.__views.signUpWin.add(n.__views.__alloyId130),n.__views.__alloyId131=Ti.UI.createView({width:Ti.UI.FILL,height:Ti.UI.SIZE,top:10,left:10,right:10,bottom:10,borderColor:"#d2d3ce",backgroundColor:"#ffffff",id:"__alloyId131"}),n.__views.__alloyId130.add(n.__views.__alloyId131),n.__views.__alloyId132=Ti.UI.createView({layout:"vertical",width:Ti.UI.FILL,height:Ti.UI.SIZE,top:10,left:10,right:10,bottom:10,id:"__alloyId132"}),n.__views.__alloyId131.add(n.__views.__alloyId132),n.__views.__alloyId133=Ti.UI.createLabel({color:"#2a363a",width:Ti.UI.FILL,height:Ti.UI.SIZE,font:{fontFamily:"Lato-Regular",fontSize:14},text:"Please upload your photo",id:"__alloyId133"}),n.__views.__alloyId132.add(n.__views.__alloyId133),n.__views.item_image=Ti.UI.createImageView({preventDefaultImage:!0,id:"item_image",image:"/images/icons/icon_take_photo.png",top:"10",width:"50%"}),n.__views.__alloyId132.add(n.__views.item_image),r?n.addListener(n.__views.item_image,"click",r):a["$.__views.item_image!click!loadPhoto"]=!0,n.__views.fullname=Ti.UI.createTextField({height:40,borderColor:"#dfe0e4",borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,verticalAlign:Titanium.UI.TEXT_VERTICAL_ALIGNMENT_CENTER,textAlign:Titanium.UI.TEXT_ALIGNMENT_LEFT,backgroundColor:"#ffffff",width:Titanium.UI.FILL,left:10,right:10,top:10,font:{fontFamily:"Lato-Regular"},color:"#000000",id:"fullname",hintText:"Fullname"}),n.__views.__alloyId130.add(n.__views.fullname),n.__views.mobile=Ti.UI.createTextField({height:40,borderColor:"#dfe0e4",borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,verticalAlign:Titanium.UI.TEXT_VERTICAL_ALIGNMENT_CENTER,textAlign:Titanium.UI.TEXT_ALIGNMENT_LEFT,backgroundColor:"#ffffff",width:Titanium.UI.FILL,left:10,right:10,top:10,font:{fontFamily:"Lato-Regular"},color:"#000000",id:"mobile",hintText:"Mobile Number"}),n.__views.__alloyId130.add(n.__views.mobile),n.__views.email=Ti.UI.createTextField({height:40,borderColor:"#dfe0e4",borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,verticalAlign:Titanium.UI.TEXT_VERTICAL_ALIGNMENT_CENTER,textAlign:Titanium.UI.TEXT_ALIGNMENT_LEFT,backgroundColor:"#ffffff",width:Titanium.UI.FILL,left:10,right:10,top:10,font:{fontFamily:"Lato-Regular"},color:"#000000",id:"email",hintText:"Email Address"}),n.__views.__alloyId130.add(n.__views.email),n.__views.username=Ti.UI.createTextField({height:40,borderColor:"#dfe0e4",borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,verticalAlign:Titanium.UI.TEXT_VERTICAL_ALIGNMENT_CENTER,textAlign:Titanium.UI.TEXT_ALIGNMENT_LEFT,backgroundColor:"#ffffff",width:Titanium.UI.FILL,left:10,right:10,top:10,font:{fontFamily:"Lato-Regular"},color:"#000000",id:"username",hintText:"Username"}),n.__views.__alloyId130.add(n.__views.username),n.__views.password=Ti.UI.createTextField({height:40,borderColor:"#dfe0e4",borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,verticalAlign:Titanium.UI.TEXT_VERTICAL_ALIGNMENT_CENTER,textAlign:Titanium.UI.TEXT_ALIGNMENT_LEFT,backgroundColor:"#ffffff",width:Titanium.UI.FILL,left:10,right:10,top:10,font:{fontFamily:"Lato-Regular"},color:"#000000",id:"password",hintText:"Password",passwordMask:"true"}),n.__views.__alloyId130.add(n.__views.password),n.__views.confirm=Ti.UI.createTextField({height:40,borderColor:"#dfe0e4",borderStyle:Ti.UI.INPUT_BORDERSTYLE_ROUNDED,verticalAlign:Titanium.UI.TEXT_VERTICAL_ALIGNMENT_CENTER,textAlign:Titanium.UI.TEXT_ALIGNMENT_LEFT,backgroundColor:"#ffffff",width:Titanium.UI.FILL,left:10,right:10,top:10,font:{fontFamily:"Lato-Regular"},color:"#000000",id:"confirm",hintText:"Confirm Password",passwordMask:"true"}),n.__views.__alloyId130.add(n.__views.confirm),n.__views.__alloyId134=Ti.UI.createButton({height:40,borderColor:"#C6C8CA",textAlign:Titanium.UI.TEXT_ALIGNMENT_CENTER,backgroundColor:"#5375BD",borderRadius:6,color:"#ffffff",width:Titanium.UI.FILL,left:10,right:10,top:10,font:{fontFamily:"Lato-Regular"},title:"Register",id:"__alloyId134"}),n.__views.__alloyId130.add(n.__views.__alloyId134),t?n.addListener(n.__views.__alloyId134,"click",t):a["$.__views.__alloyId134!click!doRegister"]=!0,o.destroy=function(){},_.extend(n,n.__views),arguments[0]||{};var s=0,l=Alloy.createController("loading");n.signUpWin.add(l.getView());var d;Ti.App.addEventListener("imagePreview: imageCallback",i),n.signUpWin.addEventListener("close",function(){Ti.App.addEventListener("imagePreview: imageCallback",i),n.destroy(),console.log("window close")}),a["$.__views.item_image!click!loadPhoto"]&&n.addListener(n.__views.item_image,"click",r),a["$.__views.__alloyId134!click!doRegister"]&&n.addListener(n.__views.__alloyId134,"click",t),_.extend(n,o)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;