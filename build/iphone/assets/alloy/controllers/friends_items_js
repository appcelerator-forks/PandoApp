function __processArg(e,t){var i=null;return e&&(i=e[t]||null,delete e[t]),i}function Controller(){function e(e){var t=parent({name:"id"},e.source);Alloy.Globals.Navigator.open("conversation",{f_id:s,id:t})}function t(){o.inner_box.removeAllChildren();for(var t=0;t<c.length;t++){var i=o.UI.create("View",{classes:["hsize","wfill","horz"],f_id:c[t].f_id,id:c[t].id}),r=o.UI.create("ImageView",{top:10,width:60,height:"auto",defaultImage:"/images/default/small_item.png",image:c[t].img_path}),a=o.UI.create("View",{classes:["hsize","vert","padding"],width:"70%"}),n=o.UI.create("Label",{classes:["h5","wfill","hsize"],textAlign:"left",text:c[t].item_name}),s=c[t].total||0,l=o.UI.create("Label",{classes:["h6","wfill","hsize"],color:"#333333",textAlign:"left",text:s+" unread message."});a.add(n),a.add(l),i.add(r),i.add(a),o.inner_box.add(i),i.addEventListener("click",e)}}function i(){l.start(),c=d.getDataByFid(s),t(),o.label_friends.text="Items ("+c.length+")",l.finish()}function r(){o.win.add(l.getView()),i()}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="friends_items",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var o=this,a={};o.__views.win=Ti.UI.createWindow({backgroundColor:"#ebebeb",titleAttributes:{color:"#ffffff"},navBarHidden:"false",font:{fontFamily:"Lato-Regular"},barColor:"#75d0cb",id:"win",title:"Friends"}),o.__views.win&&o.addTopLevelView(o.__views.win),o.__views.__alloyId13=Ti.UI.createScrollView({layout:"vertical",width:Ti.UI.FILL,height:Ti.UI.FILL,contentHeight:Ti.UI.SIZE,contentWidth:Ti.UI.FILL,id:"__alloyId13"}),o.__views.win.add(o.__views.__alloyId13),o.__views.__alloyId14=Ti.UI.createView({width:Ti.UI.FILL,height:Ti.UI.SIZE,id:"__alloyId14"}),o.__views.__alloyId13.add(o.__views.__alloyId14),o.__views.__alloyId15=Ti.UI.createView({layout:"vertical",width:Ti.UI.SIZE,height:Ti.UI.SIZE,top:10,left:10,right:10,bottom:10,id:"__alloyId15"}),o.__views.__alloyId14.add(o.__views.__alloyId15),o.__views.label_friends=Ti.UI.createLabel({color:"#2a363a",width:Ti.UI.SIZE,height:Ti.UI.SIZE,font:{fontFamily:"Lato-Light",fontSize:24},text:"Items (0)",id:"label_friends"}),o.__views.__alloyId15.add(o.__views.label_friends),o.__views.__alloyId16=Ti.UI.createView({layout:"vertical",width:Ti.UI.FILL,height:Ti.UI.SIZE,top:"0",left:10,right:10,bottom:10,borderColor:"#a5a5a5",backgroundColor:"#ffffff",id:"__alloyId16"}),o.__views.__alloyId13.add(o.__views.__alloyId16),o.__views.__alloyId17=Ti.UI.createView({layout:"vertical",width:Ti.UI.FILL,height:Ti.UI.SIZE,top:"0",backgroundColor:"#e5e5e5",id:"__alloyId17"}),o.__views.__alloyId16.add(o.__views.__alloyId17),o.__views.inner_box=Ti.UI.createView({layout:"vertical",width:Ti.UI.FILL,height:Ti.UI.SIZE,top:"0",left:10,right:10,bottom:10,id:"inner_box"}),o.__views.__alloyId17.add(o.__views.inner_box),a.destroy=function(){},_.extend(o,o.__views);var n=arguments[0]||{},s=n.f_id,l=Alloy.createController("loading"),d=Alloy.createCollection("items"),c=d.getDataByFid(s);console.log(c),r(),Ti.App.addEventListener("friends_items:refresh",i),o.win.addEventListener("close",function(){Ti.App.removeEventListener("friends_items:refresh",i),o.destroy(),console.log("window close")}),_.extend(o,a)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;