var Alloy=require("alloy"),_=require("alloy/underscore")._,model,collection;exports.definition={config:{columns:{id:"INTEGER",u_id:"INTEGER",typeName:"TEXT",updated:"TEXT"},adapter:{type:"sql",collection_name:"updateChecker"}},extendModel:function(e){return _.extend(e.prototype,{}),e},extendCollection:function(e){return _.extend(e.prototype,{getCheckerById:function(e,t){var i=this,o="";"undefined"!=typeof t&&(o="AND u_id = "+t);var a="SELECT * FROM "+i.config.adapter.collection_name+" WHERE id='"+e+"' "+o;db=Ti.Database.open(i.config.adapter.db_name),"android"!=Ti.Platform.osname&&db.file.setRemoteBackup(!1);var r=db.execute(a),l=[];return r.isValidRow()&&(l={typeName:r.fieldByName("typeName")}),r.close(),db.close(),i.trigger("sync"),l},updateModule:function(e,t,i,o){var a=this,r="";"undefined"!=typeof o?r=" AND u_id = "+o:o=0;var l="SELECT * FROM "+a.config.adapter.collection_name+" WHERE id="+e+r,n="";db=Ti.Database.open(a.config.adapter.db_name),"android"!=Ti.Platform.osname&&db.file.setRemoteBackup(!1);var s=db.execute(l);n=s.isValidRow()?"UPDATE "+a.config.adapter.collection_name+" SET updated='"+i+"' WHERE id='"+e+"'"+r:"INSERT INTO "+a.config.adapter.collection_name+" (id, typeName, updated, u_id) VALUES ('"+e+"','"+t+"','"+i+"', "+o+")",db.execute(n),db.close(),a.trigger("sync")}}),e}},model=Alloy.M("updateChecker",exports.definition,[]),collection=Alloy.C("updateChecker",exports.definition,model),exports.Model=model,exports.Collection=collection;