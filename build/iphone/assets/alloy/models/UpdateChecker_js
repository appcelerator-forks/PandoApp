var Alloy=require("alloy"),_=require("alloy/underscore")._,model,collection;exports.definition={config:{columns:{id:"INTEGER",u_id:"INTEGER",typeName:"TEXT",updated:"TEXT"},adapter:{type:"sql",collection_name:"updateChecker"}},extendModel:function(e){return _.extend(e.prototype,{}),e},extendCollection:function(e){return _.extend(e.prototype,{getCheckerById:function(e,t){var i=this,a="";"undefined"!=typeof t&&(a="AND u_id = "+t);var o="SELECT * FROM "+i.config.adapter.collection_name+" WHERE id='"+e+"' "+a;db=Ti.Database.open(i.config.adapter.db_name),"android"!=Ti.Platform.osname&&db.file.setRemoteBackup(!1);var r=db.execute(o),l=[];return r.isValidRow()&&(l={typeName:r.fieldByName("typeName")}),r.close(),db.close(),i.trigger("sync"),l},updateModule:function(e,t,i,a){var o=this,r="";"undefined"!=typeof a?r=" AND u_id = "+a:a=0;var l="SELECT * FROM "+o.config.adapter.collection_name+" WHERE id="+e+r,n="";db=Ti.Database.open(o.config.adapter.db_name),"android"!=Ti.Platform.osname&&db.file.setRemoteBackup(!1);var s=db.execute(l);n=s.isValidRow()?"UPDATE "+o.config.adapter.collection_name+" SET updated='"+i+"' WHERE id='"+e+"'"+r:"INSERT INTO "+o.config.adapter.collection_name+" (id, typeName, updated, u_id) VALUES ('"+e+"','"+t+"','"+i+"', "+a+")",db.execute(n),db.close(),o.trigger("sync")}}),e}},model=Alloy.M("updateChecker",exports.definition,[]),collection=Alloy.C("updateChecker",exports.definition,model),exports.Model=model,exports.Collection=collection;